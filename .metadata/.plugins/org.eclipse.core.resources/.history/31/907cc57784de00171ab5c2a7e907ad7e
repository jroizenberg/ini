package com.institucion.controller;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.zkoss.zk.ui.util.Clients;

import com.institucion.model.Cliente;

public class Imprimir {

	private static Log log = LogFactory.getLog(Imprimir.class);

	public static void imprimirComprobante (Cliente cli, String actividad , boolean isOrden, String monto, String montoExtra ){
		Date hora=new Date();
		DateFormat hourdateFormat = new SimpleDateFormat("dd/MM/yyyy");
		
		DateFormat hourdateFormat2 = new SimpleDateFormat("HH:mm");
		String nom="";
		String act="";
		String tipo="";
		if(cli != null ){
			if(cli.getApellido() != null)
				nom= cli.getApellido();
			if(cli.getNombre() != null)
				nom= nom +" "+ cli.getNombre();
			
			if(nom.length() > 20){
				nom=nom.substring(0, 20);
			}
		}
		if(actividad != null){
			act= actividad;
			if(act.length() > 16){
				act=nom.substring(0, 16);
			}
		}
		
		if(isOrden){
			tipo="ORDEN";
		}else{
			tipo="PARTICULAR";
		}
		String ss=new String(
				""+hourdateFormat.format(hora)+ "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + hourdateFormat2.format(hora)+"<br/>" +
				"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INSTITUTO SWISZCZ<br/>" +
				"&nbsp;&nbsp;  - Comprob de Inscripcion -<br/>" +
				"<br/>Cliente:"+nom +  // ANA MARIA GALVEZ
				"<br/>Actividad: " +act +   // RPG
				"<br/>Tipo:" +tipo ) ;    // ORDEN/PARTICULAR
				
		if(montoExtra != null){
			ss= ss+"<br/>Abonado: $"+monto + " " + montoExtra;
		}else{
			ss= ss+"<br/>Abonado: $"+monto +"<br/>";
		}
		ss= ss+	"<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ¡¡MUCHAS GRACIAS!! ");	
		
		log.error("Comienza impresora: por string a imprimir "+ss );
		Clients.evalJavaScript("ImprimirVar(' "+ss+" ')" );
		
		
		log.error("Comienza impresora: por string a imprimir "+ss );
		
	}
}

